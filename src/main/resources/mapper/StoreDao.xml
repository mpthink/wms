<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.think.wms.dao.StoreDao">    
    
    <insert id="insertStore" parameterType="Store">
    	insert into
    		wms_Store
    		<trim prefix="(" suffix=")" suffixOverrides=",">
				<if test="storeName != null">store_name,</if>
				<if test="storeSubParrent != 0">store_sub_parrent,</if>
				<if test="storeSubName != null">store_sub_name,</if>
				<if test="storeAddress != null">store_address,</if>
				<if test="storeTotalSpace != null">store_total_space,</if>
				<if test="storeManager.userId != null">store_manager,</if>
			</trim>
    		<trim prefix="values (" suffix=")" suffixOverrides=",">
				<if test="storeName != null">#{storeName},</if>
				<if test="storeSubParrent != 0">#{storeSubParrent},</if>
				<if test="storeSubName != null">#{storeSubName},</if>
				<if test="storeAddress != null">#{storeAddress},</if>
				<if test="storeTotalSpace != null">#{storeTotalSpace},</if>
				<if test="storeManager.userId != null">#{storeManager.userId},</if>
			</trim>
    </insert>
    
	<delete id="deleteStore" parameterType="int">
		delete
			from wms_Store
		where
			store_id=#{StoreId}
	</delete>
    
    <update id="updateStore" parameterType="Store">
    	update wms_Store
    	<trim prefix="set" suffixOverrides=",">
				<if test="storeName != null">store_name=#{storeName},</if>
				<if test="storeSubParrent != 0">store_sub_parrent=#{storeSubParrent},</if>
				<if test="storeSubName != null">store_sub_name=#{storeSubName},</if>
				<if test="storeAddress != null">store_address=#{storeAddress},</if>
				<if test="storeTotalSpace != null">store_total_space=#{storeTotalSpace},</if>
				<if test="storeManager.userId != null">store_manager=#{storeManager.userId},</if>
		</trim>
    </update>
    
	<select id="queryById" resultType="Store" parameterType="int">
        select 
			store.store_id,
			store.store_name,
			store.store_sub_parrent,
			store.store_sub_name,
			store.store_address,
			store.store_total_space,
			storeManager.user_id "storeManager.user_id",
			storeManager.user_name "storeManager.user_name",
			storeManager.user_realname "storeManager.user_realname"
        from 
        	wms_store store
        left join wms_user storeManager on store.store_manager = storeManager.user_id
        where
        	store.store_id=#{storeId}
    </select>
    
    <select id="queryParentStores" resultType="Store">
        select 
			store.store_id,
			store.store_name,
			store.store_sub_parrent,
			store.store_sub_name,
			store.store_address,
			store.store_total_space,
			storeManager.user_id "storeManager.user_id",
			storeManager.user_name "storeManager.user_name",
			storeManager.user_realname "storeManager.user_realname"
        from 
        	wms_store store
        left join wms_user storeManager on store.store_manager = storeManager.user_id
        where
        	store.store_sub_parrent=0
        order by store.store_name
    </select>
    
    <select id="queryByParentId" resultType="Store" parameterType="int">
        select 
			store.store_id,
			store.store_name,
			store.store_sub_parrent,
			store.store_sub_name,
			store.store_address,
			store.store_total_space,
			storeManager.user_id "storeManager.user_id",
			storeManager.user_name "storeManager.user_name",
			storeManager.user_realname "storeManager.user_realname"
        from 
        	wms_store store
        left join wms_user storeManager on store.store_manager = storeManager.user_id
        where
        	store.store_sub_parrent=#{storeSubParrent}
        order by store.store_name,store.store_sub_name
    </select>
    
	<select id="queryAll" resultType="Store">
        select 
			store.store_id,
			store.store_name,
			store.store_sub_parrent,
			store.store_sub_name,
			store.store_address,
			store.store_total_space,
			storeManager.user_id "storeManager.user_id",
			storeManager.user_name "storeManager.user_name",
			storeManager.user_realname "storeManager.user_realname"
        from 
        	wms_store store
        left join wms_user storeManager on store.store_manager = storeManager.user_id
        order by store.store_name,store.store_sub_parrent,store.store_sub_name
    </select>
</mapper>