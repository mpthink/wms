<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.think.wms.dao.CustomerDao">    
    
    <insert id="insertCustomer" parameterType="Customer">
    	insert into
    		wms_customer
    	<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="customerName != null">customer_name,</if>
			<if test="customerWayPay != null">customer_way_pay,</if>
			<if test="customerWayOut != null">customer_way_out,</if>
			<if test="customerCompany != null">customer_company,</if>
			<if test="customerAddress != null">customer_address,</if>
			<if test="customerPhone != null">customer_phone,</if>
			<if test="customerCategory.customerCategoryId != null">customer_category_id,</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="customerName != null">#{customerName,jdbcType=VARCHAR},</if>
			<if test="customerWayPay != null">#{customerWayPay},</if>
			<if test="customerWayOut != null">#{customerWayOut},</if>
			<if test="customerCompany != null">#{customerCompany},</if>
			<if test="customerAddress != null">#{customerAddress},</if>
			<if test="customerPhone != null">#{customerPhone},</if>
			<if test="customerCategory.customerCategoryId != null">#{customerCategory.customerCategoryId},</if>
		</trim>
    </insert>
    
	<delete id="deleteCustomer" parameterType="int">
		delete
			from wms_customer
		where
			customer_id=#{customerId}
	</delete>
    
    <update id="updateCustomer" parameterType="Customer">
    	update 
    		wms_customer
    	<trim prefix="set" suffixOverrides=",">
    		<if test="customerName != null">customer_name=#{customerName},</if>
			<if test="customerWayPay != null">customer_way_pay=#{customerWayPay},</if>
			<if test="customerWayOut != null">customer_way_out=#{customerWayOut},</if>
			<if test="customerCompany != null">customer_company=#{customerCompany},</if>
			<if test="customerAddress != null">customer_address=#{customerAddress},</if>
			<if test="customerPhone != null">customer_phone=#{customerPhone},</if>
			<if test="customerCategory.customerCategoryId != null">customer_category_id=#{customerCategory.customerCategoryId},</if>
    	</trim>
    	where
    		customer_id=#{customerId}
    </update>

	<select id="queryById" resultType="Customer" parameterType="int">
        select 
			customer.customer_id,
			customer.customer_name,
			customer.customer_way_pay,
			customer.customer_way_out,
			customer.customer_company,
			customer.customer_address,
			customer.customer_phone,
			customerCategory.customer_category_id "customerCategory.customer_category_id",
			customerCategory.customer_category_name "customerCategory.customer_category_name"
        from 
        	wms_customer customer
        left join wms_customer_category customerCategory on customer.customer_category_id = customerCategory.customer_category_id
        where
        	customer.customer_id=#{customerId}
    </select>
    
    <select id="queryByName" resultType="Customer" parameterType="String">
        select 
			customer.customer_id,
			customer.customer_name,
			customer.customer_way_pay,
			customer.customer_way_out,
			customer.customer_company,
			customer.customer_address,
			customer.customer_phone,
			customerCategory.customer_category_id "customerCategory.customer_category_id",
			customerCategory.customer_category_name "customerCategory.customer_category_name"
        from 
        	wms_customer customer
        left join wms_customer_category customerCategory on customer.customer_category_id = customerCategory.customer_category_id
        where
        	customer.customer_name=#{customerName}
    </select>

	<select id="queryAll" resultType="Customer">
        select 
			customer.customer_id,
			customer.customer_name,
			customer.customer_way_pay,
			customer.customer_way_out,
			customer.customer_company,
			customer.customer_address,
			customer.customer_phone,
			customerCategory.customer_category_id "customerCategory.customer_category_id",
			customerCategory.customer_category_name "customerCategory.customer_category_name"
        from 
        	wms_customer customer
        left join wms_customer_category customerCategory on customer.customer_category_id = customerCategory.customer_category_id
        order by customer.customer_id
    </select>
</mapper>